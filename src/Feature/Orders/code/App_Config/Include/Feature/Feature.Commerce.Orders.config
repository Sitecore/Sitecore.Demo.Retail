<?xml version="1.0"?>

<configuration xmlns:patch="http://www.sitecore.net/xmlconfig/">
  <sitecore>
      <pipelines>
          <initialize>
              <processor type="Sitecore.Feature.Commerce.Catalog.Infrastructure.Pipelines.InitializeRoutes, Sitecore.Feature.Commerce.Catalog" resolve="true" patch:before="processor[@type='Sitecore.Mvc.Pipelines.Loader.InitializeGlobalFilters, Sitecore.Mvc']" />
          </initialize>
      </pipelines>

      <excludeUrlTracking>
          <url>/api/storefront/checkout/GetCheckoutData</url>
          <url>/api/storefront/checkout/GetShippingMethods</url>
          <url>/api/storefront/checkout/SetShippingMethods</url>
          <url>/api/storefront/checkout/SetPaymentMethods</url>
      </excludeUrlTracking>

      <commerce.Entities>
          <CartLine type="Sitecore.Commerce.Connect.CommerceServer.Orders.Models.CommerceCartLine, Sitecore.Commerce.Connect.CommerceServer">
              <patch:attribute name="type">Sitecore.Feature.Commerce.Orders.Models.CommerceCartLineWithImages, Sitecore.Feature.Commerce.Orders</patch:attribute>
          </CartLine>
      </commerce.Entities>
      
  </sitecore>
</configuration>